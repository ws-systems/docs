<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Web Server Installation | WhiteStar Docs</title>
    <meta name="description" content="WhiteStar Systems Documentation Hub">
    <link rel="icon" href="/logo.png">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#242524">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
  <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#242524">
  <meta name="msapplication-TileImage" content="/icons/ms-icon-144x144.png">
  <meta name="msapplication-TileColor" content="#000000">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
    
    <link rel="preload" href="/assets/css/0.styles.0b27800c.css" as="style"><link rel="preload" href="/assets/js/app.ef7e9bc6.js" as="script"><link rel="preload" href="/assets/js/9.08c93109.js" as="script"><link rel="prefetch" href="/assets/js/2.d7bfeb83.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.74258d3e.js"><link rel="prefetch" href="/assets/js/3.d361e002.js"><link rel="prefetch" href="/assets/js/4.3fb1906a.js"><link rel="prefetch" href="/assets/js/5.f23e0abe.js"><link rel="prefetch" href="/assets/js/6.22052cfe.js"><link rel="prefetch" href="/assets/js/7.889cdb9e.js"><link rel="prefetch" href="/assets/js/8.2e6b4303.js"><link rel="prefetch" href="/assets/js/10.1387c2b5.js"><link rel="prefetch" href="/assets/js/11.1701807b.js"><link rel="prefetch" href="/assets/js/12.5ab35af5.js"><link rel="prefetch" href="/assets/js/13.ce77ccda.js"><link rel="prefetch" href="/assets/js/14.7f515b3e.js"><link rel="prefetch" href="/assets/js/15.d7509363.js"><link rel="prefetch" href="/assets/js/16.2018e99a.js"><link rel="prefetch" href="/assets/js/17.bc16aafd.js"><link rel="prefetch" href="/assets/js/18.cf926b52.js"><link rel="prefetch" href="/assets/js/19.e2bf9804.js"><link rel="prefetch" href="/assets/js/20.e2296a80.js"><link rel="prefetch" href="/assets/js/21.6c160823.js"><link rel="prefetch" href="/assets/js/22.176c6ad1.js"><link rel="prefetch" href="/assets/js/23.bc9490c3.js"><link rel="prefetch" href="/assets/js/24.dfc499c9.js"><link rel="prefetch" href="/assets/js/25.5addac54.js"><link rel="prefetch" href="/assets/js/26.4aea06bb.js"><link rel="prefetch" href="/assets/js/27.b8112f86.js"><link rel="prefetch" href="/assets/js/28.b6c34924.js"><link rel="prefetch" href="/assets/js/29.4c1638a0.js"><link rel="prefetch" href="/assets/js/30.fe5d9bb1.js"><link rel="prefetch" href="/assets/js/31.3fd112c3.js"><link rel="prefetch" href="/assets/js/32.16d32761.js"><link rel="prefetch" href="/assets/js/33.58c33329.js"><link rel="prefetch" href="/assets/js/34.e4922839.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0b27800c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="home-link router-link-active"><!----><span class="site-name">
      WhiteStar Docs
    </span></a><div class="links"><form id="search-form" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form><nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Docs Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Products</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/welcome/" class="nav-link">Welcome</a></li><li class="dropdown-item"><!----><a href="/ms-mon/" class="nav-link router-link-active">Mediasite Recorder Monitor</a></li><li class="dropdown-item"><!----><a href="/inventory/" class="nav-link">Inventory</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Tools</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/hub/" class="nav-link">Hub</a></li><li class="dropdown-item"><!----><a href="/vault/" class="nav-link">Vault</a></li></ul></div></div><a href="https://github.com/ws-systems/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Docs Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Products</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/welcome/" class="nav-link">Welcome</a></li><li class="dropdown-item"><!----><a href="/ms-mon/" class="nav-link router-link-active">Mediasite Recorder Monitor</a></li><li class="dropdown-item"><!----><a href="/inventory/" class="nav-link">Inventory</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Tools</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/hub/" class="nav-link">Hub</a></li><li class="dropdown-item"><!----><a href="/vault/" class="nav-link">Vault</a></li></ul></div></div><a href="https://github.com/ws-systems/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Mediasite Recorder Monitor</span><!----></p><ul class="sidebar-group-items"><li><a href="/ms-mon/" class="sidebar-link">MediaSite Recorder Monitor</a></li><li><a href="/ms-mon/web_install.html" class="active sidebar-link">Web Server Installation</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ms-mon/web_install.html#vault-configuration" class="sidebar-link">Vault Configuration</a></li><li class="sidebar-sub-header"><a href="/ms-mon/web_install.html#docker-container-deployment" class="sidebar-link">Docker Container Deployment</a></li></ul></li><li><a href="/ms-mon/configuration.html" class="sidebar-link">Configuration</a></li><li><a href="/ms-mon/agent_deploy.html" class="sidebar-link">Deploying an Agent</a></li><li><a href="/ms-mon/user_management.html" class="sidebar-link">Managing Users</a></li><li><a href="/ms-mon/usage.html" class="sidebar-link">Day-to-day Usage</a></li></ul></div></li></ul></div><div class="page"><div class="content"><h1 id="web-server-installation"><a href="#web-server-installation" aria-hidden="true" class="header-anchor">#</a> Web Server Installation</h1><p>Mediasite Recorder Monitor is split into two main components: the Web Server which manages the scheduling of jobs, sending notifications, and providing a UI for administrators to manage the installation; and an agent which runs jobs on the same network as the Mediasite Recorders. Before we can deploy any agents, we need to setup the Web Server, which orchestrates the agents.</p><h2 id="vault-configuration"><a href="#vault-configuration" aria-hidden="true" class="header-anchor">#</a> Vault Configuration</h2><p>The deployment configuration is stored in a Vault Secret, and should contain all of the following information:</p><table><thead><tr><th style="text-align:left">Key</th><th style="text-align:left">Value</th></tr></thead><tbody><tr><td style="text-align:left">db-password</td><td style="text-align:left">{ DB PASSWORD }</td></tr><tr><td style="text-align:left">db-url</td><td style="text-align:left">jdbc:mysql://{ DB HOST }:{ DB PORT }/{ DB NAME }</td></tr><tr><td style="text-align:left">db-user</td><td style="text-align:left">{ DB USER }</td></tr><tr><td style="text-align:left">debug.showStacktrace</td><td style="text-align:left">false</td></tr><tr><td style="text-align:left">issues.hideLink</td><td style="text-align:left">true</td></tr><tr><td style="text-align:left">issues.link</td><td style="text-align:left">https://support.whitestar.systems/</td></tr><tr><td style="text-align:left">odic.callbackURL</td><td style="text-align:left">http://{ FQDN of Monitor Server }/auth/callback</td></tr><tr><td style="text-align:left">oidc.clientId</td><td style="text-align:left">{ OPENID CLIENT ID }</td></tr><tr><td style="text-align:left">oidc.discoveryURL</td><td style="text-align:left">https://{ HUB URL }/hub/.well-known/openid-configuration</td></tr><tr><td style="text-align:left">oidc.secret</td><td style="text-align:left">{ OPENID SECRET }</td></tr><tr><td style="text-align:left">sso.update-info-URL</td><td style="text-align:left">https://{ HUB URL }/hub/users/me</td></tr></tbody></table><p>For the database, it simply needs to exist (and should be empty) with the specified DB User having all privileges on the requisite DB. The DB tables and relationships will be configured on first run by the ORM.</p><p>You will also need to register the Web Server as a service within Hub to obtain the Client ID and Secret. Remember to replace the <code>{ HUB URL }</code> with the FQDN of your hub installation to allow the server to pull the OpenID configuration, as well as to set the correct URL in the UI for the user to update their own information (which is how they would change their name, email, etc.). When setting the <code>odic.callbackURL</code>, it should point to the Web Server you are configuring; this tells Hub where to send users after they have logged-in. You will also need to whitelist this callback URL in the Service in Hub.</p><p>If you want users to be able to report issues, you can enable the <em>Report Issue Link</em> which is shown in the footer of the UI, as well as on the Error Pages by setting <code>issues.hideLink</code> to <code>false</code>, and specifying <code>issues.link</code> to the link reference, which could be to your ticketing system, or even a <code>mailto:</code> link.</p><h2 id="docker-container-deployment"><a href="#docker-container-deployment" aria-hidden="true" class="header-anchor">#</a> Docker Container Deployment</h2><p>Once you have setup the Vault Secret, you are ready to deploy the docker container (assuming that you have already installed Docker on your host). The image is available in the Docker Store for free and can be pulled via the Docker CLI.</p><div class="language-bash extra-class"><pre class="language-bash"><code>docker pull wssystems/mms-server
</code></pre></div><p>We can then create and run the container, being sure to set the Vault Environment Variables correctly.</p><div class="language-bash extra-class"><pre class="language-bash"><code>docker create --name mms-server \
  -e VAULT_ADDR<span class="token operator">=</span><span class="token string">&quot;{ VAULT URL }&quot;</span> \
  -e VAULT_ROLE<span class="token operator">=</span><span class="token string">&quot;{ VAULT APP ROLE }&quot;</span> \
  -e VAULT_SECRET<span class="token operator">=</span><span class="token string">&quot;{ VAULT APP ROLE SECRET }&quot;</span> \
  -e MS_APP<span class="token operator">=</span><span class="token string">&quot;{ VAULT SECRET NAME }&quot;</span> \
  -p 7000:8080 \
  --restart<span class="token operator">=</span>always \
  wssystems/mms-server

docker start mms-server
</code></pre></div><p>The Mediasite Recorder Monitor Service is now running on port 7000!</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>If you want to host the service on a different port you can either change the configuration to have the service run on port 80 (HTTP); however, it is recommended that you use a reverse proxy (like Nginx) to reverse proxy the service, while providing support for HTTPS. HTTPS should be used, since the agents will obtain the Mediasite credentials via the API, as well as any external integrations you configure will be otherwise sent via Plain-Text.</p></div></div><div class="page-edit"><div class="edit-link"><a href="https://github.com/ws-systems/docs/edit/master/ms-mon/web_install.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><div class="last-updated"><span class="prefix">Updated: </span><span class="time">7/14/2018, 11:20:10 PM</span></div></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/ms-mon/" class="prev router-link-active">
          MediaSite Recorder Monitor
        </a></span><span class="next"><a href="/ms-mon/configuration.html">
          Configuration
        </a> →
      </span></p></div></div></div></div>
    <script src="/assets/js/9.08c93109.js" defer></script><script src="/assets/js/app.ef7e9bc6.js" defer></script>
  </body>
</html>
